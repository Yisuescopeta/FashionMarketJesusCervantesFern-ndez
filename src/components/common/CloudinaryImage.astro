---
import { CldImage } from "astro-cloudinary";

interface Props {
    src: string;
    alt: string;
    width?: number;
    height?: number;
    class?: string;
    priority?: boolean;
}

const {
    src,
    alt,
    width = 800,
    height = 800,
    class: className,
    priority = false,
} = Astro.props;

const isFullUrl = src?.startsWith("http") || src?.startsWith("https");
---

{
    isFullUrl ? (
        <img
            src={src}
            alt={alt}
            width={width}
            height={height}
            class={className}
            loading={priority ? "eager" : "lazy"}
        />
    ) : (
        <CldImage
            src={src}
            width={width}
            height={height}
            alt={alt}
            class={className}
            loading={priority ? "eager" : "lazy"}
            crop="fill"
            gravity="auto"
            sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
        />
    )
}
